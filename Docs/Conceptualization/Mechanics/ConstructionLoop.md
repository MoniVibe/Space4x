# Mechanic: Construction Loop

## Overview

**Status**: Concept  
**Complexity**: Moderate  
**Category**: Economy / Infrastructure

**One-line description**: Processed resources flow from carrier-supported facilities into construction sites, advancing projects as carriers and veteran crews apply their throughput.

## Core Concept

Construction sits directly atop the mining and hauling loops. Raw ore enters processing facilities located on carriers, stations, or colonies, converting into refined materials that feed construction sites over time. Every build queue consumes stored resources gradually, with progress gated by the carriers executing the task and the experience level of their crews. Stations excel at zero-G assembly but struggle to source materials; colonies enjoy abundant local resources yet pay steep costs to export; fleets or single carriers can operate as mobile colonies, balancing freedom with crew morale. Because the initial game snapshot is serialized for player modification, construction recipes, facility capabilities, and cargo capacities must be data-driven and extensible.

## How It Works

### Basic Rules

1. **Processing**: Mined resources are delivered to facilities (shipboard foundries, station refineries, colony fabs) that convert inputs into refined goods according to recipes and throughput caps.
2. **Staging**: Refined goods are stored in cargo holds across carriers, stations, and colonies. Holds track capacity per resource type and can overflow or degrade if mismanaged.
3. **Construction**: When a construction site is supplied and assigned carriers, progress advances each tick by the combined construction rate of participating carriers modified by their crew levels. Resources are consumed in parallel with progress until the project completes.

### Build Environment Differentiation

- **Stations**: Highest construction efficiency thanks to zero-G frameworks and dedicated fab arrays, but depend heavily on haul routes to stay stocked.
- **Colonies**: Ready access to raw resources and workforce accelerates build queues, yet exporting goods off-world incurs tech-dependent taxes (fuel, launch windows, customs).
- **Mobile Fleets**: Carriers outfitted as mobile colonies can process and construct on the move. Their nomadic lifestyle stresses morale; extended migrations trigger colonists to disembark when visiting settled worlds, taking owned ships and lowering fleet cohesion.

### Facility Tiers & Availability

- **Tier Scale**: Facilities range from Small, Medium, Large, Massive, to Titanic. Each step multiplies processing and construction throughput but increases power, crew, and slot requirements.
- **Mounting Rules**: Small through Massive facilities can mount on carriers and most stations; Titanic facilities only anchor to megastructures (major stations, titans, capital supercarriers).
- **Colony Support**: A colonyâ€™s development level dictates how many facilities of each tier it can host. Richer planets escalate development faster, but planetary modifiers (gravity, atmosphere, hostility) reduce tier caps or throughput.
- **Caps & Tech**: Planet size and empire tech level set hard ceilings on facility tiers. Upgrades unlock higher tiers or allow mobile fleets to field oversized facilities at the cost of morale strain and maintenance.

### Parameters and Variables

| Parameter | Default Value | Range | Effect |
|-----------|---------------|-------|--------|
| ProcessingRate | 1.0 | 0.1-5.0 | Multiplies raw-to-refined conversion per tick.
| RecipeEfficiency | 1.0 | 0.5-2.0 | Captures tech tier and facility upgrades.
| CargoCapacity | 1000 | 200-20000 | Storage per resource class on the hosting entity.
| ConstructionRate | 1.0 | 0.2-3.0 | Base build progress generated by assigned carrier.
| CrewLevelModifier | 1.0 | 0.5-1.5 | Multiplier derived from crew experience/discipline.

### Edge Cases

- **Facility Saturation**: Processing stalls when output exceeds available cargo hold capacity; triggers hauling alerts.
- **Resource Mismatch**: Construction queues hold until every required material is present, preventing partial completion exploits.
- **Crew Fatigue**: Overworked crews suffer diminishing modifiers, encouraging rotation or training investment.
- **Migration Shock**: Large-scale colonist departures from mobile fleets reduce morale and available crew levels until replacements arrive or policies change.

## Player Interaction

### Player Decisions

- Choosing facility placement (shipborne vs station vs colony) to balance flexibility with throughput.
- Selecting which carriers support construction versus other loops when resources are scarce.
- Timing upgrades that increase cargo capacity or crew effectiveness to accelerate key projects.

### Skill Expression

Expert players orchestrate just-in-time hauling, stagger construction queues to avoid saturation, and assign veteran crews to critical builds for maximum rate gains.

### Feedback to Player

- Visual: Construction sites display progress bars, required materials, and active carrier contributions.
- Numerical: Facility panels list processing throughput, backlog levels, and crew modifiers.
- Audio: Completion chimes and under-supply alerts prompt attention.

## Balance and Tuning

### Balance Goals

- Construction must meaningfully consume mined resources so surplus stockpiles demand logistical planning.
- Crew level and carrier assignment should provide noticeable but not runaway acceleration.

### Tuning Knobs

1. **ProcessingRate Scaling**: Adjust refinement speed to pace mid-game expansion.
2. **Cargo Decay**: Introduce soft caps via spoilage or maintenance costs on excessive stockpiles.
3. **Crew Modifier Curves**: Tune experience gains and fatigue thresholds to encourage rotation and training decisions.

### Known Issues

- TBD until processing and construction prototypes expose pacing risks.

## Integration with Other Systems

| System/Mechanic | Type of Interaction | Priority |
|-----------------|---------------------|----------|
| Mining Loop | Supplies raw resources to processing facilities | Critical |
| Haul Loop | Moves refined goods between facilities and construction sites | Critical |
| Combat Loop | Protects facilities and construction projects | High |
| Alignment/Doctrine | Crew discipline affects fatigue and efficiency | Medium |

### Emergent Possibilities

- Mobile fabrication carriers that process and build on-site, enabling rapid frontier expansion.
- Doctrine policies that trade construction speed for safety, altering crew fatigue curves.
- Colonies seeding splinter factions when disembarking colonists take their owned ships to found new settlements or guild enclaves.

## Implementation Notes

### Technical Approach

- Model facilities as serialized entities referencing processing recipes so modders can author custom production chains.
- Represent cargo holds with typed buffers capable of storing multiple resource classes and capacity limits per type.
- Construction systems should aggregate carrier contributions each tick, multiplying by crew-derived modifiers sourced from the alignment data structures.

### Performance Considerations

- Batch processing and construction evaluations per sector to avoid per-entity overhead at million-scale simulations.
- Use Burst-friendly math for resource consumption and progress updates to maintain determinism.

### Testing Strategy

1. Unit tests validating recipe conversions and cargo capacity enforcement.
2. Integration tests ensuring construction stalls correctly when materials or carriers are absent.
3. Stress tests with large numbers of simultaneous projects to observe performance and pacing.

## Examples

### Example Scenario 1

**Setup**: Mining loop floods raw ore into station-based refineries.  
**Action**: Player assigns veteran construction crews to orbital shipyard project while expanding cargo capacity.  
**Result**: Shipyard completes swiftly, enabling new carrier production without starving other queues.

### Example Scenario 2

**Setup**: Player-modified start seeds mobile fabrication carrier with limited crew experience.  
**Action**: Carrier deploys to frontier, constructs forward station slowly until crew levels improve via training missions.  
**Result**: Once veterans emerge, construction rate spikes, illustrating the impact of crew progression.

## References and Inspiration

- **Satisfactory**: Processing chains feeding build queues.
- **Homeworld: Deserts of Kharak**: Carrier-based fabrication in hostile territory.

## Revision History

| Date | Change | Reason |
|------|--------|--------|
| 2025-10-31 | Initial draft | Captured construction loop vision |

---

*Last Updated: October 31, 2025*  
*Document Owner: Design Team*
